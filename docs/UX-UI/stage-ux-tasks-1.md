# Stage UX Tasks 1: –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ —É—Ä–æ–≤–Ω—è (–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ü–û–î–•–û–î)

## üéØ –¶–µ–ª—å
–ò–∑–º–µ–Ω–∏—Ç—å UX —É—Ä–æ–≤–Ω–µ–π —Å –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–∞ **–µ–¥–∏–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º –±–ª–æ–∫–æ–≤**. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ü–æ—à–∞–≥–æ–≤–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ (`/app/lesson/[id]`)
- **–ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –í—Å–µ –±–ª–æ–∫–∏ –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É, —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (`/app/level/[id]`)
- **–õ–æ–≥–∏–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**: –ó–∞–≥–æ–ª–æ–≤–æ–∫ (3 —Å–µ–∫) ‚Üí –¢–µ–∫—Å—Ç ‚Üí –í–∏–¥–µ–æ ‚Üí –¢–µ—Å—Ç ‚Üí ... ‚Üí –ê—Ä—Ç–µ—Ñ–∞–∫—Ç ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ

## üöÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω (3 –∑–∞–¥–∞—á–∏, 2-3 —á–∞—Å–∞)

### ‚úÖ –ß—Ç–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞ 100%:
- `TextContent`, `VideoPlayer`, `TestWidget`, `CompletionScreen` - –≥–æ—Ç–æ–≤—ã –∫–∞–∫ –µ—Å—Ç—å
- `useUserProgress` - –≤—Å—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í—Å—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —É—Ä–æ–≤–Ω—è–º
- –í—Å–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Card, Button, shadcn/ui)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ API endpoints

---

## Task 1: BlockContainer - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫–æ–≤ (30 –º–∏–Ω—É—Ç)

### –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –æ–±–µ—Ä—Ç–∫—É –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### –§–∞–π–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
**`src/components/level/BlockContainer.tsx`**

### –õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
```typescript
interface BlockContainerProps {
  children: React.ReactNode;
  title: string;
  type: 'title' | 'text' | 'video' | 'test' | 'completion';
  state: 'locked' | 'active' | 'completed';
  order: number;
  onUnlock?: () => void; // –î–ª—è auto-unlock –∑–∞–≥–æ–ª–æ–≤–∫–∞
}
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫–æ–≤:
- **`locked`**: –°–µ—Ä—ã–π, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π, `pointer-events: none`
- **`active`**: –ü–æ–ª–Ω–æ—Ü–≤–µ—Ç–Ω—ã–π, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—Ü—ã
- **`completed`**: –ó–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞, –º—è–≥–∫–∞—è –∑–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞

### –ê–Ω–∏–º–∞—Ü–∏–∏:
- –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ (opacity + translateY)
- –ü—É–ª—å—Å–∞—Ü–∏—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –ü—Ä–æ—Å—Ç—ã–µ CSS transitions

---

## Task 2: LevelProgressiveView - –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (1.5 —á–∞—Å–∞)

### –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ UX

### –§–∞–π–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
**`src/components/level/LevelProgressiveView.tsx`**

### –õ–æ–≥–∏–∫–∞ (–∫–æ–ø–∏—Ä—É–µ–º –∏–∑ LessonContainer):
1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** - —Ç–æ—á–Ω–æ –∫–∞–∫ –≤ `LessonContainer`:
   ```typescript
   // –ë–µ—Ä–µ–º –≤—Å—é –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ lessonSteps
   // –ë–µ—Ä–µ–º –≤—Å—é –ª–æ–≥–∏–∫—É loadStepProgress
   // –ë–µ—Ä–µ–º –≤—Å—é –ª–æ–≥–∏–∫—É updateProgress
   ```

2. **–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**:
   ```typescript
   const [unlockedBlocks, setUnlockedBlocks] = useState<number[]>([]);
   const [autoUnlockTimer, setAutoUnlockTimer] = useState<number | null>(null);
   ```

3. **–õ–æ–≥–∏–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** (–ø—Ä–æ—Å—Ç–∞—è):
   ```typescript
   // –ó–∞–≥–æ–ª–æ–≤–æ–∫: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫
   useEffect(() => {
     const timer = setTimeout(() => unlockBlock(0), 3000);
     return () => clearTimeout(timer);
   }, []);
   
   // –û—Å—Ç–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏: –ø—Ä–∏ onComplete –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   const handleBlockComplete = (blockIndex: number) => {
     updateProgress(blockIndex); // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é
     unlockBlock(blockIndex + 1); // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π
   };
   ```

4. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥**:
   ```typescript
   return (
     <div className="max-w-4xl mx-auto space-y-6">
       {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —É—Ä–æ–≤–Ω—è - BlockContainer */}
       <BlockContainer title="Level Introduction" type="title" state={getBlockState(0)}>
         <LevelHeader level={level} />
       </BlockContainer>

       {/* –í—Å–µ —à–∞–≥–∏ - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã */}
       {lessonSteps.map((step, index) => (
         <BlockContainer key={index} title={`Step ${index + 1}`} type={step.step_type} state={getBlockState(index + 1)}>
           {renderStepContent(step, index)} {/* –ö–æ–ø–∏—Ä—É–µ–º –∏–∑ LessonContainer */}
         </BlockContainer>
       ))}

       {/* Completion - –µ—Å–ª–∏ –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ */}
       {isCompleted && (
         <BlockContainer title="Level Complete" type="completion" state="active">
           <CompletionScreen {...existingProps} />
         </BlockContainer>
       )}
     </div>
   );
   ```

### –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ LessonContainer:
- `renderStepContent()` - —Ç–æ—á–Ω–æ —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è switch/case
- `updateProgress()` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `loadStepProgress()` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –í—Å—è –ª–æ–≥–∏–∫–∞ —Å `userTier`, `artifactTemplate`, etc.

---

## Task 3: –ù–æ–≤—ã–π —Ä–æ—É—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (15 –º–∏–Ω—É—Ç)

### –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 3.1: –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
**`src/app/app/level/[id]/page.tsx`**
```typescript
// –ö–æ–ø–∏—Ä—É–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑ lesson/[id]/page.tsx
// –ú–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ:
// - import LessonContainer -> import LevelProgressiveView
// - <LessonContainer> -> <LevelProgressiveView>
```

#### 3.2: –û–±–Ω–æ–≤–∏—Ç—å LevelCard
**`src/components/level/LevelCard.tsx`** (1 —Å—Ç—Ä–æ–∫–∞):
```typescript
// –ë—ã–ª–æ:
href={canClick ? `/app/lesson/${level.id}` : '#'}
// –°—Ç–∞–ª–æ:
href={canClick ? `/app/level/${level.id}` : '#'}
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:
- –°—Ç–∞—Ä—ã–π UX: `/app/lesson/[id]` - –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–æ–≤—ã–π UX: `/app/level/[id]` - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –û–¥–Ω–∞ —Å—Å—ã–ª–∫–∞ –≤ `LevelCard` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –º–µ–∂–¥—É –Ω–∏–º–∏

### A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```typescript
// –í LevelCard.tsx –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å feature flag:
const useProgressiveUX = process.env.NEXT_PUBLIC_PROGRESSIVE_UX === 'true';
const href = useProgressiveUX ? `/app/level/${level.id}` : `/app/lesson/${level.id}`;
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –ù–∏–∫–∞–∫–∏—Ö breaking changes
- –í—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- **Task 1**: 30 –º–∏–Ω—É—Ç (–ø—Ä–æ—Å—Ç–æ–π UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
- **Task 2**: 1.5 —á–∞—Å–∞ (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ + –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏)
- **Task 3**: 15 –º–∏–Ω—É—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–∞ + 1 —Å—Å—ã–ª–∫–∞)
- **–ò—Ç–æ–≥–æ**: 2.25 —á–∞—Å–∞

### –ö–æ–¥:
- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**: 3
- **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: 1 
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞**: ~90%

### –†–∏—Å–∫–∏:
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ** - –Ω–µ —Ç—Ä–æ–≥–∞–µ–º —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥
- **–û—Ç–∫–∞—Ç** - –ø—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫—É –æ–±—Ä–∞—Ç–Ω–æ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ü–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞—á:
1. **Task 1** (BlockContainer) - –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
2. **Task 2** (LevelProgressiveView) - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
3. **Task 3** (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è) - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ—É—Ç–∞–º

### –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ
- –°–æ–±—Ä–∞—Ç—å feedback
- –ü—Ä–∏ —É—Å–ø–µ—Ö–µ - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤—Å–µ —É—Ä–æ–≤–Ω–∏
- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö - –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### useProgressiveUnlock –ù–ï –ù–£–ñ–ï–ù
–í–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ö—É–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—É—é –ª–æ–≥–∏–∫—É –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
```typescript
const [unlockedBlocks, setUnlockedBlocks] = useState<number[]>([]);

const unlockBlock = (index: number) => {
  setUnlockedBlocks(prev => [...prev, index]);
};

const getBlockState = (index: number): 'locked' | 'active' | 'completed' => {
  if (stepProgress[index]) return 'completed';
  if (unlockedBlocks.includes(index)) return 'active';
  return 'locked';
};
```

### –ê–Ω–∏–º–∞—Ü–∏–∏ - CSS only
```css
.block-unlock {
  animation: slideInFromBottom 0.5s ease-out;
}

.block-pulse {
  animation: pulse 1s ease-in-out;
}
```

### Accessibility
- –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏: `aria-disabled="true"`
- Screen reader announcements –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
- Focus management

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ë—ã—Å—Ç—Ä–æ** - 2.25 —á–∞—Å–∞ –≤–º–µ—Å—Ç–æ 10+ —á–∞—Å–æ–≤
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ** - –º–∏–Ω–∏–º—É–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. **–ì–∏–±–∫–æ** - –ª–µ–≥–∫–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –±–ª–æ–∫–æ–≤ –ø—Ä–æ—Å—Ç–æ–µ
5. **Maintainable** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥

**–ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!** üöÄ
