# Детальный план задач Этапа 1 - Foundation

## Задача 1.1: Environment Setup

**Цель**: Настроить проект для работы как BizLevel, сохранив всю существующую функциональность

**Связанные файлы**:
- package.json
- .env.local
- README.md

**Команды для агента Cursor**:
1. Открой package.json и измени только:
   - name: "bizlevel"
   - description: "Educational platform with 10 business levels"
   - author: обнови на актуальную информацию
2. НЕ УДАЛЯЙ никакие зависимости, только добавь если потребуется позже
3. Открой .env.local и убедись что:
   - NEXT_PUBLIC_PRODUCTNAME=bizlevel
   - Убедись что все Supabase переменные на месте и работают
4. Проверь что проект запускается командой npm run dev
5. Зайди на localhost:3000 и убедись что аутентификация работает
6. Попробуй зарегистрироваться и войти - все должно работать

**Правила**:
- НЕ изменяй версии существующих пакетов
- НЕ удаляй никакие скрипты из package.json
- Сохрани все существующие переменные окружения

**Критерии успеха**:
- Проект запускается без ошибок
- Аутентификация полностью работает
- В консоли нет критических ошибок
- Название проекта изменено на BizLevel

---

## Задача 1.2: Branding Update

**Цель**: Обновить визуальную идентичность на BizLevel, минимально изменяя код

**Связанные файлы**:
- src/app/layout.tsx
- src/app/page.tsx
- public/favicon.ico
- src/app/favicon.ico

**Команды для агента Cursor**:
1. В src/app/layout.tsx найди metadata и обнови:
   - title на "BizLevel - Master Business Skills"
   - description на образовательную тематику
2. НЕ МЕНЯЙ структуру layout, только тексты
3. В src/app/page.tsx обнови только тексты на главной:
   - Заголовок на что-то про обучение бизнесу
   - Подзаголовок про 10 уровней
   - НЕ трогай компоненты и структуру
4. Если есть упоминания старого названия в UI - замени на BizLevel
5. Favicon можно пока оставить или заменить на простой с буквой B

**Правила**:
- Изменяй ТОЛЬКО тексты и метаданные
- НЕ трогай стили и компоненты
- НЕ меняй цветовую схему (это в theme)
- Сохрани все существующие классы и структуру

**Критерии успеха**:
- На всех страницах виден бренд BizLevel
- Метаданные обновлены для SEO
- Структура компонентов не изменена
- Приложение выглядит как образовательное

---

## Задача 1.3: Navigation Adaptation

**Цель**: Адаптировать навигацию под образовательную платформу, скрыв ненужное

**Связанные файлы**:
- src/components/AppLayout.tsx
- Любые файлы с конфигурацией навигации

**Команды для агента Cursor**:
1. Найди в AppLayout.tsx массив или объект с пунктами меню
2. Закомментируй (НЕ удаляй) пункт "Table" или "Tasks"
3. Найди "Storage" и переименуй в "My Materials" или "Артефакты"
4. Добавь новые пункты меню:
   - "Levels" с путем /levels
   - "AI Assistant" с путем /chat
5. Сохрани все иконки если они используются (или используй похожие)
6. Убедись что порядок логичный: Dashboard, Levels, AI Assistant, My Materials, Settings

**Правила**:
- НЕ удаляй код, только комментируй ненужное
- Используй существующую структуру навигации
- НЕ создавай новый компонент навигации
- Пути должны начинаться без /app (если не используется)

**Критерии успеха**:
- В меню видны: Levels, AI Assistant, My Materials
- Table/Tasks скрыт из меню но код сохранен
- Навигация работает (даже если страницы еще не созданы)
- Мобильное меню тоже обновлено

---

## Задача 1.4: Database Schema - Core Tables

**Цель**: Расширить БД для образовательной платформы через Supabase MCP

**Связанные таблицы**:
- user_profiles (расширить)
- levels (создать)
- lesson_steps (создать)
- test_questions (создать)

**Команды для агента Cursor**:
1. Используй Supabase MCP для ВСЕХ операций с БД
2. Сначала расширь существующую таблицу user_profiles, добавив:
   - current_level INTEGER DEFAULT 1
   - tier_type TEXT DEFAULT 'free'
   - ai_messages_count INTEGER DEFAULT 0
   - ai_daily_reset_at TIMESTAMPTZ
   - completed_lessons INTEGER[]
3. Создай таблицу levels со структурой из architecture.md
4. Создай таблицу lesson_steps со всеми полями
5. Создай таблицу test_questions
6. Создай базовые RLS политики для публичного чтения levels и lesson_steps
7. После создания таблиц, сгенерируй TypeScript типы

**Правила**:
- Используй ТОЛЬКО Supabase MCP для работы с БД
- НЕ пиши SQL вручную в коде
- Следуй snake_case для имен таблиц и колонок
- Обязательно создай RLS политики

**Критерии успеха**:
- Все таблицы созданы в Supabase
- user_profiles расширен новыми полями
- RLS политики активны
- TypeScript типы сгенерированы
- Нет ошибок в консоли Supabase

---

## Задача 1.5: Legal Documents Update

**Цель**: Обновить правовые документы под образовательный сервис и перевести на русский язык

**Связанные файлы**:
- public/terms/privacy-policy.md (или похожий)
- public/terms/terms-of-service.md
- src/app/legal/[document]/page.tsx

**Команды для агента Cursor**:
1. Найди существующие правовые документы в public/terms/
2. В privacy-policy замени упоминания на:
   - Образовательную платформу BizLevel
   - Сбор данных о прогрессе обучения
   - Использование AI для помощи в обучении
3. В terms-of-service обнови:
   - Описание сервиса (10 уровней обучения)
   - Условия использования AI ассистента
   - Ограничения бесплатного тарифа
4. НЕ меняй структуру документов и форматирование
5. Проверь что страница /legal корректно отображает документы

**Правила**:
- Сохрани юридическую структуру документов
- Только адаптируй контент под образование
- НЕ удаляй важные юридические разделы
- Используй простой и понятный язык

**Критерии успеха**:
- Документы отражают образовательный характер
- Упомянуты AI ассистент и уровни
- Страницы /legal/* корректно отображаются
- Сохранена юридическая полнота

---

## Задача 1.6: Stage 1 Testing & Refactor

**Цель**: Проверить что фундамент готов и все работает

**Связанные компоненты**:
- Все измененные в задачах 1.1-1.5
- Тесты если они есть в проекте

**Команды для агента Cursor**:
1. Запусти проект и проверь:
   - Главная страница отображается с брендом BizLevel
   - Можно зарегистрироваться новым пользователем
   - После логина видна обновленная навигация
   - Legal страницы доступны и читаемы
2. Проверь в Supabase Dashboard:
   - Все таблицы созданы правильно
   - RLS политики активны
   - При регистрации создается запись в user_profiles
3. Проверь консоль браузера на ошибки
4. Если есть тесты - запусти npm test
5. Исправь найденные критические проблемы
6. НЕ занимайся оптимизацией - только критические баги

**Правила**:
- Фокус на работоспособности, не на совершенстве
- Исправляй только блокирующие проблемы
- Документируй найденные некритические issues
- НЕ добавляй новый функционал

**Критерии успеха**:
- Аутентификация полностью работает
- Навигация отображается правильно
- БД готова для следующих этапов
- Нет критических ошибок в консоли
- Базовый user flow работает

---

## Общие правила для всех задач:

1. **Максимально переиспользуй существующий код** - это ключевой принцип
2. **НЕ создавай новые компоненты** если можно адаптировать существующие
3. **Комментируй, а не удаляй** неиспользуемый код
4. **Делай минимальные изменения** для достижения цели
5. **После каждой задачи обновляй docs/status.md** (создай файл если нет)

## Формат записи в status.md:
```
## [Дата] - Task 1.X: [Название]
- Измененные файлы: [список]
- Что сделано: [краткое описание]
- Проблемы: [если были]
- Решения: [как решил]
- Статус: Завершено
```